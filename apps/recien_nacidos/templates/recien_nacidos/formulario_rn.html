{% extends "base.html" %}
{% load static %}


{% block title %}
    {{form.instance.pk|yesno:"Actualizar RN, Añadir RN"}}
{% endblock title %}


{% block estilos_personalizados %}
    <link rel="stylesheet" href="{% static 'styles/form.css' %}">
{% endblock estilos_personalizados %}
    


{% block menus_navegacion %}
    {% include 'includes/topbar.html' %}
    {% include 'includes/sidebar.html' %}
{% endblock menus_navegacion %}





{% block content %}
    <main class="main-container">

    <!-- Breadcrumb -->
    <nav class="breadcrumbs">
        <a href="../inicioMatrona.html">Inicio</a>
        <span>›</span>
        <a href="recienNacido.html">Recién Nacidos</a>
        <span>›</span>
        <span>{{form.instance.pk|yesno:"Actualizar RN, Añadir RN"}}</span>
    </nav>

    <section class="form-card">
    
    <div class="form-header">
        <h2 class="form-title">{{form.instance.pk|yesno:"Actualizar RN, Añadir RN"}}</h2>
        <p class="form-subtitle">Complete la ficha de nacimiento y antropometría.</p>
    </div>

    <form method="POST" class="main-form">
        {% csrf_token %}

        <fieldset class="form-section">
            <legend class="section-legend">Datos Generales</legend>

            <div class="form-row">
                <div class="form-group">
                    <label for="{{form.parto.id_for_label}}">Parto Asociado</label>
                   {{form.parto}}
                </div>

                <div class="form-group">
                    <label for="fecha_hora">Fecha y Hora de Nacimiento</label>
                    {{form.fecha_hora}}
                </div>
            </div>

            <div class="form-row three-cols">
                <div class="form-group">
                    <label for="codigo">Código Identificador</label>
                    {{form.codigo}}    
                </div>

                <div class="form-group">
                    <label for="sexo">Sexo</label>
                    {{form.sexo}}
                </div>

                <div class="form-group">
                    <label for="c_2480">Código 2480</label>
                    {{form.c_2480}}    
                </div>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Antropometría</legend>

            <div class="form-row three-cols">
                <div class="form-group">
                    <label for="peso">Peso (Gramos)</label>
                    {{form.peso}}
                    <span class="field-help">Ingrese el valor en gramos (enteros).</span>
                </div>

                <div class="form-group">
                    <label for="talla">Talla (cm)</label>
                   {{form.talla}}
                </div>

                <div class="form-group">
                    <label for="presentacion_fetal">Presentación Fetal</label>
                   {{form.presentacion_fetal}}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="perimetro_cefalico">Perímetro Cefálico (cm)</label>
                 {{form.perimetro_cefalico}}
                </div>

                <div class="form-group">
                    <label for="perimetro_toraxico">Perímetro Torácico (cm)</label>
                    {{form.perimetro_toraxico}}
                </div>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Evaluación Clínica</legend>

            <div class="form-row three-cols">
                <div class="form-group">
                    <label for="apgar_1">APGAR 1 min</label>
                   {{form.apgar_1}}
                </div>

                <div class="form-group">
                    <label for="apgar_5">APGAR 5 min</label>
                    {{form.apgar_5}}    
                </div>

                <div class="form-group">
                    <label for="destino">Destino Final</label>
                    {{form.destino}}
                </div>
            </div>
            
            <div class="form-group">
                <label for="destino_rn">Detalle de Destino (Opcional)</label>
                {{form.destino_rn}}
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Indicadores de Calidad</legend>

            <div class="checkbox-grid">
                <label class="checkbox-card">
                    {{form.alojamiento_conjunto}}
                    <span class="checkbox-text">Alojamiento Conjunto</span>
                </label>

                <label class="checkbox-card">
                   {{form.apego_canguro}}
                    <span class="checkbox-text">Apego Canguro</span>
                </label>

                <label class="checkbox-card">
                    {{form.lactante_60}}
                    <span class="checkbox-text">Lactancia < 60 min</span>
                </label>

                <label class="checkbox-card">
                    {{form.apego_tunel}}
                    <span class="checkbox-text">Apego Túnel</span>
                </label>

                <label class="checkbox-card">
                   {{form.gases_de_cordon}}
                    <span class="checkbox-text">Gases de Cordón</span>
                </label>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Complicaciones</legend>
             
            <div class="checkbox-grid">   
                {% for complicacion in form.complicaciones_postparto %}
                    <label class="checkbox-card">
                        {{complicacion.tag}}
                    <span class="checkbox-text">{{complicacion.choice_label}}</span>
                </label>
                {% endfor %}
            </div>
        </fieldset>

        
        <fieldset class="form-section">
            <legend class="section-legend">Reanimaciones Neonatales</legend>
             
            <div class="checkbox-grid">   
                {% for reanimacion in form.reanimaciones_neonatales %}
                    <label class="checkbox-card">
                        {{reanimacion.tag}}
                    <span class="checkbox-text">{{reanimacion.choice_label}}</span>
                </label>
                {% endfor %}
            </div>
        </fieldset>

        
        <fieldset class="form-section">
            <div class="form-group" style="margin-top: 1rem;">
                <label for="observaciones">Observaciones Generales</label>
                {{form.observaciones}}
            </div>
        </fieldset>


        <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="history.back()">Cancelar</button>
            <button type="submit" class="btn-primary">Registrar Recién Nacido</button>
        </div>

    </form>
</section>

</main>

{% endblock content %}
    




{% block scripts %}
    <script src="{% static 'js/manejo-error-form.js' %}"></script>
{% endblock scripts %}
    
    