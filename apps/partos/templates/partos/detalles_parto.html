{% extends "base.html" %}
{% load static %}

{% block title %}
    Detalles Parto
{% endblock title %}
    

{% block estilos_personalizados %}
    <link rel="stylesheet" href="{% static 'styles/toastify.min.css' %}">
    <link rel="stylesheet" href="{% static 'styles/detail.css' %}">
    <link rel="stylesheet" href="{% static 'styles/form.css' %}">
{% endblock estilos_personalizados %}
    

{% block menus_navegacion %}
    {% include 'includes/topbar.html' %}
    {% include 'includes/sidebar.html' %}
{% endblock menus_navegacion %}
    


{% block content %}
     <main class="main-container main-content-detail">

        <nav class="breadcrumbs breadcrumbs-margin">
            <a href="{% url 'parto:inicio' %}" class="link-color">Inicio</a> <span>â€º</span>
            <a href="{% url 'parto:listar_partos' %}" class="link-color">Partos</a> <span>â€º</span>
            <span>Ficha ClÃ­nica #854</span>
        </nav>

        <div class="layout-grid">
            
            <div class="cards-container detail-flow"> 
                
                <div class="form-header">
                    <h2 class="form-title">Registro de Parto</h2>
                    <div class="form-subtitle">
                        <span class="chip-dato active">Estado/{{object.estado|capfirst}}</span> 
                        <span class="ficha-id-number">ID: #{{object.pk}}</span> 
                    </div>
                </div>

                <div class="details-form-wrapper">
                    
                    <div class="section-header">
                        <h3 class="section-title">1. Antecedentes ObstÃ©tricos</h3>
                    </div>
                    
                    <div class="detalle-grid-3">
                        <div class="dato-box">
                            <span class="dato-label">Paciente</span>
                            <span class="dato-valor">{{object.gestacion.paciente.obtener_nombre_completo}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Edad Madre</span>
                            <span class="dato-valor">{{object.edad_madre}} aÃ±os</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tipo de Ingreso</span>
                            <span class="dato-valor">{{object.tipo_de_ingreso}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Fecha Inicio</span>
                            <span class="dato-valor">{{object.hora_inicio.date}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Hora Inicio</span>
                            <span class="dato-valor">{{object.hora_inicio.time}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Edad Gestacional</span>
                            <span class="dato-big">{{object.semanas_gestacion}}</span>
                            <span class="dato-label" style="margin-top:0;">Semanas</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Via de Nacimiento/Tipo de Parto</span>
                            <span class="dato-valor">{{object.via_nacimiento}}</span>
                        </div>
                        
                    </div>

                    <div class="section-header" style="margin-top: 2rem;">
                        <h3 class="section-title">2. EvoluciÃ³n del Trabajo de Parto</h3>
                    </div>
                   

                    <div class="detalle-grid-3">

                        <div class="dato-box">
                            <span class="dato-label">Rotura de Membrana</span>
                            <span class="dato-valor">{{object.rotura_membrana|capfirst}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">NÂº Tactos Vaginales</span>
                            <span class="dato-valor">{{object.n_tactos_vaginales}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Posicion</span>
                            <span class="dato-valor">{{object.posicion}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tipo de Regimen</span>
                            <span class="dato-valor">{{object.tipo_regimen|capfirst}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tipo de Inicio de Parto</span>
                            <span class="dato-valor">
                            
                            {% if object.inicio_parto == 'inducido_far' %}
                                Inducido Farmacologicamente
                            {% elif object.inicio_parto == 'inducido_mec' %}
                                Inducido Mecanicamente
                            {% else %}
                                {{object.inicio_parto}}
                            {% endif %}
                                


                            </span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tipo de AcompaÃ±ante</span>
                            <span class="dato-valor">{{object.tipo_acompaniante}}</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tiempo DilataciÃ³n</span>
                            <span class="dato-valor">{{object.tiempo_dilatacion}}</span>
                            <span class="dato-label">min</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tiempo Membrana Rota</span>
                            <span class="dato-valor">{{object.tiempo_membrana_rota}}</span>
                            <span class="dato-label">min</span>

                        </div>
                        <div class="dato-box">
                            <span class="dato-label">Tiempo Expulsivo</span>
                            <span class="dato-valor">{{object.tiempo_expulsivo}}</span>
                            <span class="dato-label">min</span>

                        </div>
                    </div>

            
                    <div class="section-header" style="margin-top: 2rem;">
                        <h3 class="section-title">3. Bienestar Fetal</h3>
                    </div>

                    <div class="detalle-grid-3">
                        <div class="dato-box">
                            <span class="dato-label">LCF (Latidos)</span>
                            <span class="dato-big" style="color:var(--primary);">142</span>
                            <span class="dato-label">lpm</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">PresentaciÃ³n</span>
                            <span class="dato-valor">CefÃ¡lica</span>
                        </div>
                        <div class="dato-box">
                            <span class="dato-label">PosiciÃ³n</span>
                            <span class="dato-valor">OIIA</span>
                        </div>
                    </div>

                    <div class="section-header" style="margin-top: 2rem;">
                        <h3 class="section-title">4. Procedimientos y Complicaciones</h3>
                                                <span class="dato-label">Solo los marcados son los aplicados</span>

                    </div>
                    
                    <div class="procedimientos-wrapper" style="margin-bottom: 0;">

                        {% for complicacion in object.complicaciones.all %}
                            <span class="chip-dato active">{{complicacion}}</span>     
                        {% endfor %}

                         <span class="chip-dato 
                         {% if object.monitor %}
                            active
                         {% endif %}
                             ">Monitor</span>
                         <span class="chip-dato 
                         {% if object.libertad_movimiento %}
                            active
                         {% endif %}
                             ">Libertad Movimiento</span>
                         <span class="chip-dato 
                         {% if object.uso_sala_saip %}
                            active
                         {% endif %}
                             ">Uso de Sala Saip</span>
                         <span class="chip-dato 
                         {% if object.entrega_placenta %}
                            active
                         {% endif %}
                             ">Entrega de Placenta</span>
                    </div>

                </div> <h3 class="audit-title" style="margin-top: 2rem;">Registros Asociados</h3>

                <details class="finexy-accordion" id="acc-rn" open>
                    <summary class="finexy-summary">
                        <span>AÃ±adir Analgesicos</span>
                    </summary>
                    <div class="accordion-content" id="content-rn">
                        <div class="detalle-grid-3">
                            <div class="dato-box">
                                <span class="dato-label">Sexo</span>
                                <span class="dato-valor">Femenino</span>
                            </div>
                            <div class="dato-box">
                                <span class="dato-label">Peso / Talla</span>
                                <span class="dato-valor">3.450g / 50cm</span>
                            </div>
                            <div class="dato-box">
                                <span class="dato-label">Apgar (1' / 5')</span>
                                <span class="dato-big">9 / 10</span>
                            </div>
                        </div>
                    </div>
                </details>

                <details class="finexy-accordion" id="acc-puerperio">
                    <summary class="finexy-summary">
                        <span>ðŸ‘¶ Puerperio Inmediato</span>
                    </summary>
                    <div class="accordion-content" id="content-puerperio">
                        </div>
                </details>

                <details class="finexy-accordion" id="acc-participantes">
                    <summary class="finexy-summary">
                        <span>ðŸ©º Equipo MÃ©dico</span>
                    </summary>
                    <div class="accordion-content" id="content-participantes">
                         </div>
                </details>
                
                <div class="form-actions detail-footer"> 
                    <button class="btn-danger" onclick="confirmarEliminacion()">Eliminar Registro</button>
                    <div class="right-actions">
                        <button class="btn-secondary" onclick="history.back()">Volver</button>
                        <button class="btn-primary">Modificar Ficha</button>
                    </div>
                </div>

            </div> 
            
            <div class="dashboard-panel audit-panel"> 
                <h3 class="audit-title">AuditorÃ­a del Registro</h3> 
                
                <div class="stat-item">
                    <span class="stat-label">Profesional Responsable:</span>
                    <div class="audit-info-row"> 
                        <img src="{% static 'icons/matronaicon.png' %}" width="35" class="audit-photo" alt="Foto"> 
                        <div>
                            <span class="dato-valor audit-stat-value">Dr.{{object.created_by.get_full_name}}</span> 
                            <span class="stat-label audit-stat-date">ðŸ“… 15/11/2023 â€¢ ðŸ•’ 14:30</span> 
                        </div>
                    </div>
                </div>

                <div class="stat-item">
                    <span class="stat-label">Ãšltima ModificaciÃ³n:</span>
                    <div class="audit-info-row"> 
                        <div class="audit-initials-pill">SL</div> 
                        <div>
                            <span class="dato-valor audit-stat-value">Dr.{{object.created_by.get_full_name}}</span> 
                            <span class="stat-label audit-stat-date">ðŸ“… 15/11/2023 â€¢ ðŸ•’ 16:45</span> 
                        </div>
                    </div>
                </div>

                <div class="stat-item" style="margin-top: 1rem; border-top: 1px dashed var(--border-subtle); padding-top: 1rem;">
                    <span class="stat-label">Observaciones</span>
                    <p class="audit-obs-text">
                        {{object.observaciones}}
                    </p>
                </div>

            </div> 

        </div> 

    </main>
{% endblock content %}
    


{% block scripts %}
        <script src="{% static 'js/detallar.js' %}"></script>
    <script src="{% static 'js/toastify.min.js' %}"></script>
{% endblock scripts %}
    